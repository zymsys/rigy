version: "0.1"
units: meters
coordinate_system:
  up: Y
  forward: -Z
  handedness: right

name: KubKar

metadata:
  description: |
    Very simple car: a wedge-like body with four wheels "nailed on".
    Demonstrates imports + instances + 3-anchor attachment (composition v0.2+).

# Import library assets at the top (composition v0.2+).
imports:
  wheel:
    source: parts/wheel.rigy.yaml
    contract: parts/wheel.ricy.yaml

meshes:
  - id: car_body_mesh
    name: CarBody
    primitives:
      # Wedge-ish body approximation (MVP): big box + smaller "cabin" box
      - type: box
        id: body
        dimensions: { x: 2.2, y: 0.4, z: 1.2 }
        transform:
          translation: [0.0, 0.45, 0.0]

      - type: box
        id: cabin
        dimensions: { x: 0.9, y: 0.35, z: 0.9 }
        transform:
          translation: [-0.3, 0.75, 0.0]

# First-class anchors (v0.2+ composition): wheel mount frames on the body.
# Each wheel uses a frame3 set: (a,b,c)
anchors:
  # Front-left (positive Z)
  - id: fl_a
    translation: [0.8, 0.25, 0.65]
  - id: fl_b
    translation: [1.8, 0.25, 0.65]
  - id: fl_c
    translation: [0.8, 0.25, 1.65]

  # Front-right (negative Z)
  - id: fr_a
    translation: [0.8, 0.25, -0.65]
  - id: fr_b
    translation: [1.8, 0.25, -0.65]
  - id: fr_c
    translation: [0.8, 0.25, -1.65]

  # Rear-left (positive Z)
  - id: rl_a
    translation: [-0.8, 0.25, 0.65]
  - id: rl_b
    translation: [0.2, 0.25, 0.65]
  - id: rl_c
    translation: [-0.8, 0.25, 1.65]

  # Rear-right (negative Z)
  - id: rr_a
    translation: [-0.8, 0.25, -0.65]
  - id: rr_b
    translation: [0.2, 0.25, -0.65]
  - id: rr_c
    translation: [-0.8, 0.25, -1.65]

# Instances (composition v0.2+): define a simple scene graph of parts.
instances:
  - id: body
    mesh_id: car_body_mesh

  # Four wheel instances, attached via 3 anchors
  - id: wheel_fl
    import: wheel
    attach3:
      from: [wheel.mount_a, wheel.mount_b, wheel.mount_c]
      to:   [fl_a, fl_b, fl_c]
      transform: non_uniform

  - id: wheel_fr
    import: wheel
    attach3:
      from: [wheel.mount_a, wheel.mount_b, wheel.mount_c]
      to:   [fr_a, fr_b, fr_c]
      transform: non_uniform

  - id: wheel_rl
    import: wheel
    attach3:
      from: [wheel.mount_a, wheel.mount_b, wheel.mount_c]
      to:   [rl_a, rl_b, rl_c]
      transform: non_uniform

  - id: wheel_rr
    import: wheel
    attach3:
      from: [wheel.mount_a, wheel.mount_b, wheel.mount_c]
      to:   [rr_a, rr_b, rr_c]
      transform: non_uniform

# Symmetry is compile-time sugar; optional in v0.1. Omit if unused.
